<form [formGroup]="userTable">
  <div style="width: 100%; overflow: scroll;">
  <table class="table table-border">
    <thead class="text-nowrap">
      <th *ngFor="let item of headersTax">{{item.header}}</th>
      <th>Prazo Pagamento</th>
      <th>Método Pagamento</th>
      <th>Ações</th>
    </thead>
    <tbody>
      <ng-container
        formArrayName="tax"
        *ngFor="let group of getFormControls.controls ; let i=index"
      >
        <tr *ngIf="true" [formGroupName]="i">
          <td *ngFor="let item of headersTax">
            <mat-form-field *ngIf="!item.select" class="tax-field">
              <input
                matInput
                type="number"
                [formControlName]="item.formControlName"
              />
            </mat-form-field>


          </td>
          <td>
            <mat-form-field *ngIf="paymentDeadLine$ | async as pdl">
              <mat-select [compareWith]="compareFn" formControlName="paymentDeadLine">
                <mat-option
                  *ngFor="let option of pdl"
                  [value]="option"
                  >{{option.description}}</mat-option
                >
              </mat-select>
            </mat-form-field>

            
          </td>
          <td>
            <mat-form-field *ngIf="paymentMethod$ | async as pm">
            <mat-select [compareWith]="compareFn" formControlName="paymentMethod">
              <mat-option
                *ngFor="let option of pm"
                [value]="option"
                >{{option.description}}</mat-option
              >
            </mat-select>
          </mat-form-field>

          </td>
          <td>
            <mat-icon class="delete" (click)="deleteRow(i)"
              >delete_forever</mat-icon
            >
            <mat-icon class="done" (click)="doneRow(group)">done</mat-icon>
          </td>
        </tr>
        <tr *ngIf="false">
          <td *ngFor="let item of headersTax">
            {{group.get(item.formControlName).value}}
          </td>
          <td>
            <mat-icon class="edit" (click)="editRow(group)">edit</mat-icon>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
  <div class="action-container">
    <button mat-raised-button type="submit" (click)="addRow()">
      Adicionar taxa
    </button>
    <!-- <button
      mat-raised-button
      [disabled]="userTable.invalid"
      type="submit"
      (click)="submitForm()"
    >
      Enviar
    </button> -->
  </div>
</form>
<!-- <div class="output">
  <p>Form Data: {{userTable.value | json}}</p>
  <p>Is Valid: {{userTable.valid}}</p>
</div> -->
